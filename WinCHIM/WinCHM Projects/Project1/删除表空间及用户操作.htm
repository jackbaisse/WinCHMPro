<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>删除表空间及用户操作</title>
<meta name="GENERATOR" content="WinCHM">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>
html,body { 
	/* Default Font */
	font-family: Arial, Helvetica, sans-serif;
	font-size: 11pt;
}
</style>

</head>

<body>
<P>select segment_name,partition_name,tablespace_name from&nbsp;&nbsp; 
dba_extents&nbsp; where 
tablespace_name=upper('TSP_YDEMR');--1、显示出主键的表空间是：'TSP_YDEMR'.<BR>select 'alter 
table '||owner||'.'||table_name||' drop constraint '||constraint_name||' ;' 
<BR>from dba_constraints <BR>where constraint_type in ('U', 'P') 
<BR>&nbsp;&nbsp; and (index_owner, index_name) in 
<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (select owner, segment_name 
<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from dba_segments 
<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; where tablespace_name = 
upper('TSP_YDEMR'));<BR>--alter table TEST.SYS_CODE drop constraint PK_CODEID ; 
--删除外键约束<BR>--alter table TEST.KS_WPYP_PWPLGX drop constraint PK_KS_WPYP_PWPLGX 
; <BR>DROP TABLESPACE TSP_YDEMR INCLUDING CONTENTS AND DATAFILES cascade 
constraints;--3、删除表空间及约束<BR>select 'alter system kill session 
'''||sid||','||serial#||''';' from v$session;--4、关闭全部用户连接<BR>drop user NYDBA 
cascade;--5、删除用户</P>
<P>DROP TABLESPACE TSP_YDEMR INCLUDING CONTENTS AND 
DATAFILES cascade 
constraints;--删除表空间及约束</P></body>
</html>
